# 花火撮影レンズ計算ツール（iPhoneアプリ）

花火撮影に最適なレンズmm数を計算し、構図をプレビューできるiOSアプリケーションです。

## 機能

- **レンズmm数計算**: 撮影地から花火までの距離と花火の号数を入力すると、最適なレンズmm数を自動計算
- **構図プレビュー**: リアルタイムで撮影イメージを視覚的に確認
- **地上の割合調整**: 地上部分の割合を調整して構図を最適化
- **花火の号数選択**: 3号、6号、10号、30号、40号から選択可能
- **センサーサイズ対応**: フルサイズ、APS-C、マイクロフォーサーズに対応

## 使い方

1. Xcodeでプロジェクトを開く
2. iPhoneシミュレーターまたは実機で実行
3. スライダーとピッカーで以下の値を調整：
   - **撮影地から花火までの距離**（50-5000m）
   - **地上の割合**（0-100%）
   - **花火の号数**（3号、6号、10号、30号、40号）
   - **センサーサイズ**（フルサイズ、APS-C、マイクロフォーサーズ）
4. 推奨レンズmm数がリアルタイムで表示され、プレビューで構図を確認

## 計算式

レンズmm数は以下の式で計算されます：

```
花火の高さ = 選択した号数の高さ（m）
花火の上端 = 花火の高さ（地上から上端まで）
花火の下端 = 0（地上）

空の割合 = (100 - 地上の割合) / 100
花火の高さを収める画角 = 2 × arctan(花火の高さ / (2 × 距離))
実効画角 = 花火の高さを収める画角 / 空の割合
レンズmm = (センサー高さ / 2) / tan(実効画角 / 2)
```

### 計算のポイント

- **花火の号数に基づく計算**: 3号、6号、10号、30号、40号の各サイズに対応
- **直径と高さを考慮**: 各号数の直径と高さのデータを使用
- **センサーサイズ対応**: フルサイズ、APS-C、マイクロフォーサーズに対応
- **花火全体が画面に収まる**: 花火の高さが空の部分に収まるように計算

## プロジェクト構成

- `FireworksLensCalculatorApp.swift` - アプリエントリーポイント
- `ContentView.swift` - メインビュー（入力UIと結果表示）
- `LensCalculator.swift` - レンズmm数計算ロジック
- `PreviewView.swift` - 構図プレビュー描画
- `Info.plist` - アプリ設定

## 技術仕様

- **プラットフォーム**: iOS 17.0以上
- **フレームワーク**: SwiftUI
- **言語**: Swift 5.0
- **デバイス**: iPhone、iPad対応

## ビルド方法

1. Xcode 15.0以上を開く
2. `FireworksLensCalculator.xcodeproj`を開く
3. シミュレーターまたは実機を選択
4. ⌘Rでビルド＆実行

## 花火の号数データ

| 号数 | 名称 | 直径（m） | 高さ（m） |
|------|------|----------|----------|
| 3号 | 3号玉 | 60 | 120 |
| 6号 | 6号玉 | 180 | 220 |
| 10号 | 10号玉（一尺玉） | 280 | 330 |
| 30号 | 30号玉（三尺玉） | 600 | 550 |
| 40号 | 40号玉（四尺玉） | 700 | 700 |

## 特徴

- **花火の号数に対応**: 3号から40号まで、実際の花火のサイズデータを使用
- **カメラセンサー対応**: フルサイズ、APS-C、マイクロフォーサーズに対応
- **リアルタイム更新**: スライダーやピッカーを動かすと即座に計算結果とプレビューが更新
- **視覚的なプレビュー**: SwiftUIを使用した美しい構図プレビュー
- **正確な計算**: 各号数の直径と高さを考慮した正確なレンズmm数計算
