# 📊 株価自動監視・週次レポートシステム

株価を自動で監視し、ウォッチリストに登録した企業の情報をまとめて、週次でレポートを自動生成するシステムです。

## ✨ 機能

- **株価データの自動取得**: yfinanceを使用してリアルタイムの株価データを取得
- **会社情報のまとめ**: 各企業の基本情報、財務指標、業界情報などを自動収集
- **週次レポート生成**: HTML形式の美しいレポートを自動生成
- **価格変動の可視化**: 1週間、1ヶ月、1年の価格変動をチャートで表示
- **自動スケジューリング**: 設定した日時に自動でレポートを生成

## 🚀 セットアップ

### 1. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 2. 設定ファイルの編集

`config.yaml` ファイルを編集して、監視したい株のティッカーシンボルを追加してください。

```yaml
watchlist:
  - AAPL   # Apple Inc.
  - MSFT   # Microsoft Corporation
  - GOOGL  # Alphabet Inc.
  - AMZN   # Amazon.com Inc.
  - TSLA   # Tesla Inc.
```

レポートの設定も変更できます：

```yaml
report:
  output_dir: "./reports"  # レポートの保存先
  format: "html"           # レポート形式（現在はhtmlのみ対応）
  language: "ja"           # 言語設定

schedule:
  day_of_week: "monday"    # レポート生成日（monday, tuesday, ..., sunday）
  time: "09:00"           # レポート生成時刻（24時間形式）
```

## 📖 使い方

### 即座にレポートを生成する場合

```bash
python main.py --now
```

これにより、設定ファイルに登録されているすべての株価データを取得し、レポートを生成します。

### スケジューラーを起動する場合

```bash
python main.py
```

これにより、設定ファイルで指定した日時に自動でレポートを生成するスケジューラーが起動します。
スケジューラーを停止するには、`Ctrl+C` を押してください。

### バックグラウンドで実行する場合（Linux/Mac）

```bash
nohup python main.py > stock_monitor.log 2>&1 &
```

または、systemdサービスやcronジョブとして設定することもできます。

## 📁 プロジェクト構造

```
.
├── main.py                 # メインスクリプト
├── stock_data_fetcher.py   # 株価データ取得モジュール
├── report_generator.py     # レポート生成モジュール
├── config.yaml            # 設定ファイル
├── requirements.txt       # 依存関係
├── README.md              # このファイル
└── reports/               # 生成されたレポートの保存先
    └── charts/            # チャート画像の保存先
```

## 📊 レポートの内容

生成されるレポートには以下の情報が含まれます：

- **サマリーテーブル**: すべての監視株の概要
- **各企業の詳細情報**:
  - 現在の株価
  - 1週間、1ヶ月、1年の価格変動（絶対値とパーセンテージ）
  - 会社名、セクター、業界
  - 時価総額、PER、配当利回り
  - 52週間の最高値・最安値
  - 会社概要
  - ウェブサイトリンク
- **価格推移チャート**: 過去1年の価格推移を可視化

## 🔧 カスタマイズ

### 監視する株を追加・変更

`config.yaml` の `watchlist` セクションにティッカーシンボルを追加してください。
ティッカーシンボルは、Yahoo Financeで使用されている形式です（例: AAPL, MSFT, 7203.T など）。

### レポート生成のスケジュール変更

`config.yaml` の `schedule` セクションで、生成日時を変更できます。

### レポートの出力先変更

`config.yaml` の `report.output_dir` で出力先ディレクトリを変更できます。

## ⚠️ 注意事項

- このシステムは教育・情報提供目的で作成されています。投資判断は自己責任でお願いします。
- 株価データはYahoo Financeから取得しています。データの正確性については保証できません。
- APIレート制限に注意してください。大量のリクエストを送信すると、一時的にアクセスが制限される可能性があります。

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能要望は、Issueでお知らせください。

## 📧 サポート

質問や問題がある場合は、Issueを作成してください。
